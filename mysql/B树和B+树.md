## B树

B树也称B-树,它是一颗多路平衡查找树。我们描述一颗B树时需要指定它的阶数，阶数表示了一个结点最多有多少个孩子结点，一般用字母m表示阶数。当m取2时，就是我们常见的二叉搜索树。

一颗m阶的B树定义如下：

1. 每个结点最多有m-1个关键字。

2. 根结点最少可以只有1个关键字。

3. 非根结点至少有Math.ceil(m/2)-1个关键字。

4. 每个结点中的关键字都按照从小到大的顺序排列，每个关键字的左子树中的所有关键字都小于它，而右子树中的所有关键字都大于它。

5. 所有叶子结点都位于同一层，或者说根结点到每个叶子结点的长度都相同。



## B+树

1. B+树包含2种类型的结点：内部结点（也称索引结点）和叶子结点。根结点本身即可以是内部结点，也可以是叶子结点。根结点的关键字个数最少可以只有1个。

2. B+树与B树最大的不同是内部结点不保存数据，只用于索引，所有数据（或者说记录）都保存在叶子结点中。

3. m阶B+树表示了内部结点最多有m-1个关键字（或者说内部结点最多有m个子树），阶数m同时限制了叶子结点最多存储m-1个记录。

4. 内部结点中的key都按照从小到大的顺序排列，对于内部结点中的一个key，左树中的所有key都**小于**它，右子树中的key都**大于等于**它。叶子结点中的记录也按照key的大小排列。

5. 每个叶子结点都存有相邻叶子结点的指针，叶子结点本身依关键字的大小自小而大顺序链接。

https://blog.csdn.net/Fmuma/article/details/80287924

https://www.jianshu.com/p/71700a464e97

http://www.cnblogs.com/nullzx/

## 总结

B树：相对于平衡二叉树，每个节点存储了更多的键值可数据，并且每个节点拥有更多的子节点，这样B树的阶数比平衡二叉树阶数少，减少IO次数

B+树：对B树进一步优化，非叶子节点不存储数据，仅存储键值，这样磁盘中每个数据页可以存储更多的键值，进一步减少阶数，减少IO次数。B+树叶子节点之间通过双向链表连接，并且按照顺序排列，可以使范围查找，排序查找，分组查找以及去重查找变得简单高效。

Mysql的innodb中B+树2中实现方式

1. 聚集索引：用于主键

2. 非聚集索引：用户非主键，叶子节点不存储数据，而是存储主键，再通过主键查找数据，这个过程被称为`回表`



